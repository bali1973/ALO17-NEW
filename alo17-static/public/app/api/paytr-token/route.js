(()=>{var e={};e.id=7094,e.ids=[7094],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},84574:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>y,serverHooks:()=>h,workAsyncStorage:()=>_,workUnitAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{POST:()=>x});var a=t(96559),i=t(48088),o=t(37719),n=t(32190),p=t(55511),u=t.n(p);let c=require("fs/promises");var d=t.n(c),l=t(33873),m=t.n(l);async function x(e){let r=await e.json(),t=process.env.PAYTR_MERCHANT_ID,s=process.env.PAYTR_MERCHANT_KEY,a=process.env.PAYTR_MERCHANT_SALT;if(!t||!s||!a)return n.NextResponse.json({error:"PayTR API bilgileri eksik (.env.local)"},{status:500});let i=r.user_ip||"127.0.0.1",o=r.merchant_oid||"ORDER123",p=r.email||"test@example.com",c=r.payment_amount||1e3,l=r.user_name||"",x=r.user_address||"",y=r.user_phone||"",_=r.ok_url||"",f=r.fail_url||"",h=r.test_mode||"1",g=r.payment_type||"bireysel",k="bireysel",v="",w="",R="",b="",A="";"kurumsal"===g?(k="kurumsal",R=r.company||"",w=r.taxOffice||"",v=r.taxNo||"",A=r.authorized||"",r.authorized):(k="bireysel",b=r.tc||"");let j=Buffer.from(JSON.stringify([[r.product_name||"Test \xdcr\xfcn",r.product_price||"10.00",1]])).toString("base64"),P=`${t}${i}${o}${p}${c}${j}${_}${f}${h}${a}`,T=u().createHmac("sha256",s).update(P).digest("base64"),$=m().join(process.cwd(),"public","payments.json"),S=[];try{let e=await d().readFile($,"utf-8");S=JSON.parse(e)}catch(e){S=[]}let q={date:new Date().toISOString(),payment_type:g,fatura_type:k,user_name:l,email:p,user_phone:y,user_address:x,buyer_company:R,buyer_tax_office:w,buyer_tax_no:v,buyer_tc:b,buyer_authorized:A,product_name:r.product_name||"",product_price:r.product_price||"",payment_amount:c,merchant_oid:o,status:"pending"};S.push(q),await d().writeFile($,JSON.stringify(S,null,2),"utf-8");let N=`<iframe src='https://www.paytr.com/odeme/guvenli/${T}' id='paytriframe' frameborder='0' scrolling='no' style='width:100%;min-width:350px;height:600px;'></iframe>`;return n.NextResponse.json({iframe:N})}let y=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/paytr-token/route",pathname:"/api/paytr-token",filename:"route",bundlePath:"app/api/paytr-token/route"},resolvedPagePath:"C:\\Users\\bali\\Desktop\\alo17_backup_2025-06-17_16-49-55\\src\\app\\api\\paytr-token\\route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:_,workUnitAsyncStorage:f,serverHooks:h}=y;function g(){return(0,o.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:f})}},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580],()=>t(84574));module.exports=s})();