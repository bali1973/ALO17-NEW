(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{4651:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var l=t(95155),a=t(12115),r=t(30644),i=t(68801),n=t(6874),d=t.n(n),c=t(22732);function o(e){let{allListings:s}=e,[t,r]=(0,a.useState)([]),[n,d]=(0,a.useState)([]);return((0,a.useEffect)(()=>{r(JSON.parse(localStorage.getItem("recentlyViewed")||"[]"))},[]),(0,a.useEffect)(()=>{t.length>0?d(t.map(e=>s.find(s=>s.id==e)).filter(Boolean)):d([])},[t,s]),0===n.length)?null:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-alo-dark",children:"Son Baktıkların"}),(0,l.jsx)("button",{onClick:()=>{r([]),d([]),localStorage.setItem("recentlyViewed","[]")},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-xs",children:"Temizle"})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(e=>(0,l.jsx)(i.l,{listing:e},e.id))})]})}var m=t(12926);function x(){let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(!0),[x,g]=(0,a.useState)(""),[u,h]=(0,a.useState)(1),[b]=(0,a.useState)(12),{categories:f,loading:p,error:j,refetch:y}=(0,c.j)(),{session:v}=(0,m.A)();(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/listings");if(e.ok){let t=(await e.json()).filter(e=>"active"===e.status);s(t)}}catch(e){}finally{n(!1)}})()},[]);let N=e.filter(e=>"active"===e.status).filter(e=>e.title.toLowerCase().includes(x.toLowerCase())||e.description.toLowerCase().includes(x.toLowerCase())||e.category.toLowerCase().includes(x.toLowerCase())),w=N.filter(e=>e.isPremium).slice(0,3),S=u*b,k=N.slice(S-b,S),C=Math.ceil(N.length/b),E=e=>{h(e),window.scrollTo({top:0,behavior:"smooth"})};return t?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsx)("div",{className:"max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,l.jsx)(i.Y,{},s))})})}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsxs)("div",{className:"flex gap-8",children:[(0,l.jsx)("div",{className:"w-64 flex-shrink-0",children:(0,l.jsx)(r.B,{})}),(0,l.jsxs)("div",{className:"flex-1",children:[v&&(0,l.jsx)(o,{allListings:e}),w.length>0&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,l.jsx)("span",{className:"text-yellow-500 mr-2",children:"⭐"}),"Premium İlanlar"]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>(0,l.jsx)(i.l,{listing:e},e.id))})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"T\xfcm İlanlar"}),(0,l.jsxs)("p",{className:"text-gray-600",children:[N.length," ilan bulundu"]})]}),k.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>(0,l.jsx)(i.l,{listing:e},e.id))}),C>1&&(0,l.jsx)("div",{className:"flex justify-center mt-8",children:(0,l.jsxs)("nav",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>E(u-1),disabled:1===u,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\xd6nceki"}),Array.from({length:C},(e,s)=>s+1).map(e=>(0,l.jsx)("button",{onClick:()=>E(e),className:"px-3 py-2 text-sm font-medium rounded-md ".concat(u===e?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e)),(0,l.jsx)("button",{onClick:()=>E(u+1),disabled:u===C,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})})]}):(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("p",{className:"text-gray-500 text-lg",children:x?"Arama kriterlerinize uygun ilan bulunamadı.":"Hen\xfcz ilan bulunmuyor."}),(0,l.jsx)(d(),{href:"/ilan-ver",className:"mt-4 inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"İlk İlanı Ver"})]})]})]})]})})})}},12926:(e,s,t)=>{"use strict";t.d(s,{A:()=>n,default:()=>d});var l=t(95155),a=t(12115),r=t(4702);let i=(0,a.createContext)(void 0);function n(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:s}=e,[t,n]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("alo17-session");if(e)try{let s=JSON.parse(e);new Date(s.expires)>new Date?n(s):localStorage.removeItem("alo17-session")}catch(e){localStorage.removeItem("alo17-session")}c(!1)},[]),(0,l.jsx)(r.t,{children:(0,l.jsx)(i.Provider,{value:{session:t,setSession:e=>{n(e),e?localStorage.setItem("alo17-session",JSON.stringify(e)):localStorage.removeItem("alo17-session")},isLoading:d},children:s})})}},64461:(e,s,t)=>{Promise.resolve().then(t.bind(t,4651))}},e=>{var s=s=>e(e.s=s);e.O(0,[6874,9194,6766,8801,644,8441,1684,7358],()=>s(64461)),_N_E=e.O()}]);