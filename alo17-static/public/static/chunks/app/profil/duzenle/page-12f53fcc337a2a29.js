(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2821],{1376:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(95155),l=r(12115),n=r(12926),o=r(35695),s=r(66766);let i=l.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?l.createElement("title",{id:a},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))});function u(){let{session:e,isLoading:t}=(0,n.A)(),r=(0,o.useRouter)(),[u,c]=(0,l.useState)({name:"",email:"",phone:"",location:""}),[d,m]=(0,l.useState)(""),[f,p]=(0,l.useState)(null),[h,x]=(0,l.useState)(!1),[g,b]=(0,l.useState)({type:"",text:""});(0,l.useEffect)(()=>{(null==e?void 0:e.user)&&(c({name:e.user.name||"",email:e.user.email||"",phone:"",location:""}),m("/images/placeholder.jpg")),console.log("Session:",e),e&&console.log("Session expires:",e.expires,"Şu an:",new Date().toISOString())},[e]);let y=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},v=async e=>{e.preventDefault(),x(!0),b({type:"",text:""});try{let e=new FormData;e.append("name",u.name),e.append("email",u.email),e.append("phone",u.phone),e.append("location",u.location),f&&e.append("avatar",f);let t=await fetch("/api/profile/update",{method:"POST",body:e}),r=await t.json();t.ok?(b({type:"success",text:"Profil başarıyla g\xfcncellendi!"}),window.location.reload()):b({type:"error",text:r.error||"Profil g\xfcncellenirken hata oluştu."})}catch(e){b({type:"error",text:"Bir hata oluştu. L\xfctfen tekrar deneyin."})}finally{x(!1)}};return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Y\xfckleniyor..."}):e?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Profil D\xfczenle"}),g.text&&(0,a.jsx)("div",{className:"mb-4 p-4 rounded-lg ".concat("success"===g.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:g.text}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-200",children:(0,a.jsx)(s.default,{src:d,alt:"Profil fotoğrafı",width:128,height:128,className:"w-full h-full object-cover"})}),(0,a.jsxs)("label",{className:"absolute bottom-0 right-0 p-2 bg-alo-orange text-white rounded-full cursor-pointer hover:bg-orange-600 transition-colors",children:[(0,a.jsx)(i,{className:"w-4 h-4"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){p(r);let e=new FileReader;e.onload=e=>{var t;m(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(r)}},className:"hidden"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Profil fotoğrafınızı değiştirmek i\xe7in tıklayın"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:u.name,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"Adınız Soyadınız",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"ornek@email.com",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon"}),(0,a.jsx)("input",{type:"tel",id:"phone",name:"phone",value:u.phone,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"+90 555 123 4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Konum"}),(0,a.jsx)("input",{type:"text",id:"location",name:"location",value:u.location,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"İl, İl\xe7e"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,a.jsx)("button",{type:"submit",disabled:h,className:"flex-1 bg-alo-orange text-white py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"G\xfcncelleniyor...":"Profili G\xfcncelle"}),(0,a.jsx)("button",{type:"button",onClick:()=>r.push("/profil"),className:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors",children:"İptal"})]})]})]})})}):(r.push("/giris"),null)}},4702:(e,t,r)=>{"use strict";r.d(t,{d:()=>o,t:()=>s});var a=r(95155),l=r(12115);let n=(0,l.createContext)(void 0);function o(){let e=(0,l.useContext)(n);if(!e)throw Error("useToast must be used within ToastProvider");return e}function s(e){let{children:t}=e,[r,o]=(0,l.useState)([]);return(0,a.jsxs)(n.Provider,{value:{showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=Date.now();o(a=>[...a,{id:r,message:e,type:t}]),setTimeout(()=>{o(e=>e.filter(e=>e.id!==r))},3500)}},children:[t,(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(e=>(0,a.jsx)("div",{className:"px-4 py-2 rounded shadow text-white transition-all\n              ".concat("success"===e.type?"bg-green-600":"error"===e.type?"bg-red-600":"bg-blue-600"),children:e.message},e.id))})]})}},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let a=r(12115);function l(e,t){let r=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=n(e,a)),t&&(l.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},12926:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,default:()=>i});var a=r(95155),l=r(12115),n=r(4702);let o=(0,l.createContext)(void 0);function s(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i(e){let{children:t}=e,[r,s]=(0,l.useState)(null),[i,u]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=localStorage.getItem("alo17-session");if(e)try{let t=JSON.parse(e);new Date(t.expires)>new Date?s(t):localStorage.removeItem("alo17-session")}catch(e){localStorage.removeItem("alo17-session")}u(!1)},[]),(0,a.jsx)(n.t,{children:(0,a.jsx)(o.Provider,{value:{session:r,setSession:e=>{s(e),e?localStorage.setItem("alo17-session",JSON.stringify(e)):localStorage.removeItem("alo17-session")},isLoading:i},children:t})})}},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},93756:(e,t,r)=>{Promise.resolve().then(r.bind(r,1376))}},e=>{var t=t=>e(e.s=t);e.O(0,[6766,8441,1684,7358],()=>t(93756)),_N_E=e.O()}]);