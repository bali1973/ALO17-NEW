(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2821],{1376:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(95155),l=a(12115),n=a(12926),s=a(35695),o=a(66766);let i=l.forwardRef(function(e,t){let{title:a,titleId:r,...n}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},n),a?l.createElement("title",{id:r},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))});function d(){let{session:e,isLoading:t}=(0,n.A)(),a=(0,s.useRouter)(),[d,c]=(0,l.useState)({name:"",email:"",phone:"",location:"",birthdate:""}),[u,m]=(0,l.useState)(""),[h,x]=(0,l.useState)(null),[g,p]=(0,l.useState)(!1),[f,b]=(0,l.useState)({type:"",text:""}),[y,j]=(0,l.useState)(!1),[v,N]=(0,l.useState)({current:"",new:"",confirm:""}),[w,k]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[P,D]=(0,l.useState)(!1),[z,E]=(0,l.useState)(""),[O,T]=(0,l.useState)({email:!0,sms:!1,push:!1}),_=e=>{let{name:t,checked:a}=e.target;T(e=>({...e,[t]:a}))};(0,l.useEffect)(()=>{(null==e?void 0:e.user)&&(c({name:e.user.name||"",email:e.user.email||"",phone:"",location:"",birthdate:""}),m("/images/placeholder.jpg")),console.log("Session:",e),e&&console.log("Session expires:",e.expires,"Şu an:",new Date().toISOString())},[e]);let R=e=>{let{name:t,value:a}=e.target;c(e=>({...e,[t]:a}))},A=e=>{let{name:t,value:a}=e.target;N(e=>({...e,[t]:a}))},M=async e=>{if(e.preventDefault(),k(""),v.new!==v.confirm)return void k("Yeni şifreler eşleşmiyor.");setTimeout(()=>{k("Şifre başarıyla değiştirildi!"),N({current:"",new:"",confirm:""})},1e3)},F=async e=>{e.preventDefault(),p(!0),b({type:"",text:""});try{let e=new FormData;e.append("name",d.name),e.append("email",d.email),e.append("phone",d.phone),e.append("location",d.location),e.append("birthdate",d.birthdate),h&&e.append("avatar",h);let t=await fetch("/api/profile/update",{method:"POST",body:e}),a=await t.json();t.ok?(b({type:"success",text:"Profil başarıyla g\xfcncellendi!"}),window.location.reload()):b({type:"error",text:a.error||"Profil g\xfcncellenirken hata oluştu."})}catch(e){b({type:"error",text:"Bir hata oluştu. L\xfctfen tekrar deneyin."})}finally{p(!1)}};return t?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Y\xfckleniyor..."}):e?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Profil D\xfczenle"}),f.text&&(0,r.jsx)("div",{className:"mb-4 p-4 rounded-lg ".concat("success"===f.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:f.text}),(0,r.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-200",children:(0,r.jsx)(o.default,{src:u,alt:"Profil fotoğrafı",width:128,height:128,className:"w-full h-full object-cover"})}),(0,r.jsxs)("label",{className:"absolute bottom-0 right-0 p-2 bg-alo-orange text-white rounded-full cursor-pointer hover:bg-orange-600 transition-colors",children:[(0,r.jsx)(i,{className:"w-4 h-4"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){x(a);let e=new FileReader;e.onload=e=>{var t;m(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(a)}},className:"hidden"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Profil fotoğrafınızı değiştirmek i\xe7in tıklayın"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"Adınız Soyadınız",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:d.email,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"ornek@email.com",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>{D(!0),setTimeout(()=>{alert("Doğrulama kodu e-posta adresinize g\xf6nderildi (mock).")},500)},className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",disabled:P,children:"Doğrulama Kodu G\xf6nder"})]}),P&&(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Kod",value:z,onChange:e=>E(e.target.value),className:"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{type:"button",onClick:()=>{"123456"===z?(alert("E-posta doğrulandı! (mock)"),D(!1),E("")):alert("Kod yanlış! (mock)")},className:"px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Doğrula"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"+90 555 123 4567"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Konum"}),(0,r.jsx)("input",{type:"text",id:"location",name:"location",value:d.location,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent",placeholder:"İl, İl\xe7e"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"birthdate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Doğum Tarihi"}),(0,r.jsx)("input",{type:"date",id:"birthdate",name:"birthdate",value:d.birthdate,onChange:R,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,r.jsx)("button",{type:"submit",disabled:g,className:"flex-1 bg-alo-orange text-white py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"G\xfcncelleniyor...":"Profili G\xfcncelle"}),(0,r.jsx)("button",{type:"button",onClick:()=>a.push("/profil"),className:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors",children:"İptal"})]})]}),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("button",{type:"button",onClick:()=>j(e=>!e),className:"text-alo-orange font-medium hover:underline",children:y?"Şifre Değiştirmeyi Kapat":"Şifre Değiştir"}),y&&(0,r.jsxs)("form",{onSubmit:M,className:"mt-4 bg-gray-50 rounded-lg p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mevcut Şifre"}),(0,r.jsx)("input",{type:"password",name:"current",value:v.current,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Şifre"}),(0,r.jsx)("input",{type:"password",name:"new",value:v.new,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Şifre (Tekrar)"}),(0,r.jsx)("input",{type:"password",name:"confirm",value:v.confirm,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-alo-orange",required:!0})]}),w&&(0,r.jsx)("div",{className:"text-sm text-green-600",children:w}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-alo-orange text-white py-2 rounded-lg hover:bg-orange-600",children:"Şifreyi Değiştir"})]})]}),(0,r.jsxs)("div",{className:"mt-10 bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Bildirim Tercihleri"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",name:"email",checked:O.email,onChange:_,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:"E-posta ile bildirim almak istiyorum"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",name:"sms",checked:O.sms,onChange:_,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:"SMS ile bildirim almak istiyorum"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"checkbox",name:"push",checked:O.push,onChange:_,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:"Push (anlık) bildirim almak istiyorum"})]})]})]}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)("button",{type:"button",onClick:()=>C(!0),className:"w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 font-semibold",children:"Hesabımı Kalıcı Olarak Sil"})}),S&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-red-600",children:"Hesabınızı silmek \xfczeresiniz!"}),(0,r.jsx)("p",{className:"mb-6",children:"Bu işlem geri alınamaz. T\xfcm verileriniz kalıcı olarak silinecek. Devam etmek istiyor musunuz?"}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Vazge\xe7"}),(0,r.jsx)("button",{onClick:()=>{C(!1),alert("Hesabınız kalıcı olarak silindi (mock).")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Evet, Hesabımı Sil"})]})]})})]})})}):(a.push("/giris"),null)}},4702:(e,t,a)=>{"use strict";a.d(t,{d:()=>s,t:()=>o});var r=a(95155),l=a(12115);let n=(0,l.createContext)(void 0);function s(){let e=(0,l.useContext)(n);if(!e)throw Error("useToast must be used within ToastProvider");return e}function o(e){let{children:t}=e,[a,s]=(0,l.useState)([]);return(0,r.jsxs)(n.Provider,{value:{showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=Date.now();s(r=>[...r,{id:a,message:e,type:t}]),setTimeout(()=>{s(e=>e.filter(e=>e.id!==a))},3500)}},children:[t,(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.map(e=>(0,r.jsx)("div",{className:"px-4 py-2 rounded shadow text-white transition-all\n              ".concat("success"===e.type?"bg-green-600":"error"===e.type?"bg-red-600":"bg-blue-600"),children:e.message},e.id))})]})}},6654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let r=a(12115);function l(e,t){let a=(0,r.useRef)(null),l=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=a.current;e&&(a.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(a.current=n(e,r)),t&&(l.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},12926:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,default:()=>i});var r=a(95155),l=a(12115),n=a(4702);let s=(0,l.createContext)(void 0);function o(){let e=(0,l.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i(e){let{children:t}=e,[a,o]=(0,l.useState)(null),[i,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=localStorage.getItem("alo17-session");if(e)try{let t=JSON.parse(e);new Date(t.expires)>new Date?o(t):localStorage.removeItem("alo17-session")}catch(e){localStorage.removeItem("alo17-session")}d(!1)},[]),(0,r.jsx)(n.t,{children:(0,r.jsx)(s.Provider,{value:{session:a,setSession:e=>{o(e),e?localStorage.setItem("alo17-session",JSON.stringify(e)):localStorage.removeItem("alo17-session")},isLoading:i},children:t})})}},35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},93756:(e,t,a)=>{Promise.resolve().then(a.bind(a,1376))}},e=>{var t=t=>e(e.s=t);e.O(0,[6766,8441,1684,7358],()=>t(93756)),_N_E=e.O()}]);