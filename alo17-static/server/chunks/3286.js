"use strict";exports.id=3286,exports.ids=[3286],exports.modules={14689:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},16189:(a,b,c)=>{var d=c(65773);c.o(d,"useParams")&&c.d(b,{useParams:function(){return d.useParams}}),c.o(d,"usePathname")&&c.d(b,{usePathname:function(){return d.usePathname}}),c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}}),c.o(d,"useSearchParams")&&c.d(b,{useSearchParams:function(){return d.useSearchParams}})},30922:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})},31082:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},33335:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))})},36942:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))})},52238:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))})},53286:(a,b,c)=>{c.d(b,{A:()=>o});var d=c(60687),e=c(43210),f=c(17552),g=c(16189),h=c(81836),i=c(52238),j=c(14689),k=c(33335),l=c(30922),m=c(31082),n=c(36942);function o({category:a="",subcategory:b="",onClose:c,initialShowForm:o=!1}){let{session:p}=(0,f.As)(),q=(0,g.useRouter)(),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(o),[x,y]=(0,e.useState)(""),[z,A]=(0,e.useState)([]),[B,C]=(0,e.useState)([]),[D,E]=(0,e.useState)({email:p?.user?.email||"",category:a,subcategory:b,keywords:"",priceMin:"",priceMax:"",location:"",frequency:"instant"}),F=async a=>{try{let b=await fetch(`/api/categories/${a}/subcategories`),c=await b.json();C(c)}catch(a){console.error("Alt kategoriler y\xfcklenemedi:",a)}},G=async()=>{if(!D.email||!D.email.includes("@"))return void y("L\xfctfen ge\xe7erli bir email adresi girin.");u(!0),y("");try{let a=await fetch("/api/notifications/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:D.email,category:D.category,subcategory:D.subcategory,keywords:D.keywords?D.keywords.split(",").map(a=>a.trim()):[],priceRange:D.priceMin||D.priceMax?{min:D.priceMin?parseInt(D.priceMin):void 0,max:D.priceMax?parseInt(D.priceMax):void 0}:void 0,location:D.location,frequency:D.frequency})}),b=await a.json();a.ok?(s(!0),y("Abonelik başarıyla oluşturuldu! Yeni ilanlardan anında haberdar olacaksınız."),w(!1)):y(b.error||"Abonelik oluşturulamadı.")}catch(a){y("Bir hata oluştu. L\xfctfen tekrar deneyin.")}finally{u(!1)}},H=async()=>{u(!0),y("");try{(await fetch("/api/notifications/subscription",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:a,subcategory:b})})).ok?(s(!1),y("Abonelik iptal edildi.")):y("Abonelik iptal edilemedi.")}catch(a){y("Bir hata oluştu. L\xfctfen tekrar deneyin.")}finally{u(!1)}};return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto",children:[c&&(0,d.jsx)("button",{onClick:c,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,d.jsx)(h.A,{className:"h-6 w-6"})}),(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,d.jsx)(i.A,{className:"h-6 w-6 text-blue-600"})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Yeni İlanlardan Haberdar Ol"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Bu kategorideki yeni ilanlardan anında haberdar olmak i\xe7in abone olun."})]}),x&&(0,d.jsx)("div",{className:`mb-4 p-3 rounded-lg text-sm ${x.includes("başarıyla")||x.includes("iptal")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:x}),r?(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,d.jsx)(j.A,{className:"h-5 w-5 text-green-600 mr-2"}),(0,d.jsx)("span",{className:"text-green-600 font-medium",children:"Abone Olundu"})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Bu kategorideki yeni ilanlardan haberdar olacaksınız."}),(0,d.jsxs)("button",{onClick:H,disabled:t,className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[(0,d.jsx)(k.A,{className:"h-4 w-4 mr-2"}),t?"İptal Ediliyor...":"Aboneliği İptal Et"]})]}):v?(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault(),G()},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta Adresi"}),(0,d.jsx)("input",{type:"email",value:D.email,onChange:a=>E(b=>({...b,email:a.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ornek@email.com"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),(0,d.jsxs)("select",{value:D.category,onChange:a=>{var b;return b=a.target.value,void(E(a=>({...a,category:b,subcategory:""})),b?F(b):C([]))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,d.jsx)("option",{value:"",children:"T\xfcm Kategoriler"}),z.map(a=>(0,d.jsx)("option",{value:a.slug,children:a.name},a.slug))]})]}),D.category&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alt Kategori"}),(0,d.jsxs)("select",{value:D.subcategory,onChange:a=>E(b=>({...b,subcategory:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,d.jsx)("option",{value:"",children:"T\xfcm Alt Kategoriler"}),B.map(a=>(0,d.jsx)("option",{value:a.slug,children:a.name},a.slug))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anahtar Kelimeler"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"text",value:D.keywords,onChange:a=>E(b=>({...b,keywords:a.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"telefon, iphone, samsung (virg\xfclle ayırın)"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Fiyat"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"number",value:D.priceMin,onChange:a=>E(b=>({...b,priceMin:a.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Fiyat"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"number",value:D.priceMax,onChange:a=>E(b=>({...b,priceMax:a.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10000"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konum"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"text",value:D.location,onChange:a=>E(b=>({...b,location:a.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İstanbul, Ankara, İzmir..."})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bildirim Sıklığı"}),(0,d.jsxs)("select",{value:D.frequency,onChange:a=>E(b=>({...b,frequency:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,d.jsx)("option",{value:"instant",children:"Anında"}),(0,d.jsx)("option",{value:"daily",children:"G\xfcnl\xfck \xd6zet"}),(0,d.jsx)("option",{value:"weekly",children:"Haftalık \xd6zet"})]})]}),(0,d.jsxs)("div",{className:"flex space-x-3",children:[(0,d.jsxs)("button",{type:"submit",disabled:t,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[(0,d.jsx)(i.A,{className:"h-4 w-4 mr-2"}),t?"Abone Olunuyor...":"Abone Ol"]}),(0,d.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"})]})]}):(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsxs)("button",{onClick:()=>q.push("/bildirim-tercihleri"),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:[(0,d.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"Detayları G\xf6r\xfcnt\xfcle"]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Bildirim tercihlerinizi y\xf6netmek i\xe7in tıklayın"})]})]})}},81836:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(43210);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})}};