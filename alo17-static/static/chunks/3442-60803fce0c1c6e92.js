"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3442],{6319:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))})},12926:(e,t,r)=>{r.d(t,{As:()=>o,default:()=>u});var a=r(95155),l=r(12115),n=r(50626);let s=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,n]=(0,l.useState)(null),[i,o]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();t.user&&n({user:t.user})}}catch(e){console.error("Auth check failed:",e)}finally{o(!1)}})()},[]),(0,a.jsx)(s.Provider,{value:{session:r,isLoading:i,setSession:n},children:t})}function o(){let e=(0,l.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let c=(0,l.createContext)(void 0);function d(e){let{children:t}=e,[r,s]=(0,l.useState)("tr"),[i,o]=(0,l.useState)(0);return(0,l.useEffect)(()=>(n.Ru.loadLocaleFromStorage(),s(n.Ru.getCurrentLocale()),n.Ru.onLocaleChange(e=>{s(e),o(e=>e+1),window.location.reload()})),[]),(0,a.jsx)(c.Provider,{value:{currentLocale:r,setLocale:e=>{n.Ru.setLocale(e)},forceRefresh:()=>{o(e=>e+1),window.location.reload()}},children:(0,a.jsx)("div",{children:t},i)})}function u(e){let{children:t}=e;return(0,a.jsx)(i,{children:(0,a.jsx)(d,{children:t})})}},28960:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},29337:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},35695:(e,t,r)=>{var a=r(18999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},57208:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))})},58828:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))})},73442:(e,t,r)=>{r.d(t,{A:()=>h});var a=r(95155),l=r(12115),n=r(12926),s=r(35695),i=r(74500),o=r(58828),c=r(29337),d=r(6319),u=r(78046),m=r(28960),g=r(57208);function h(e){var t;let{category:r="",subcategory:h="",onClose:b,initialShowForm:x=!1}=e,{session:p}=(0,n.As)(),f=(0,s.useRouter)(),[y,v]=(0,l.useState)(!1),[j,w]=(0,l.useState)(!1),[k,N]=(0,l.useState)(x),[A,E]=(0,l.useState)(""),[C,L]=(0,l.useState)([]),[M,S]=(0,l.useState)([]),[R,O]=(0,l.useState)({email:(null==p||null==(t=p.user)?void 0:t.email)||"",category:r,subcategory:h,keywords:"",priceMin:"",priceMax:"",location:"",frequency:"instant"});(0,l.useEffect)(()=>{B(),K()},[r,h]);let B=async()=>{try{let e=await fetch("/api/categories"),t=await e.json();L(t)}catch(e){console.error("Kategoriler y\xfcklenemedi:",e)}},P=async e=>{try{let t=await fetch("/api/categories/".concat(e,"/subcategories")),r=await t.json();S(r)}catch(e){console.error("Alt kategoriler y\xfcklenemedi:",e)}},K=async()=>{if(R.email)try{let e=await fetch("/api/notifications/subscription/check?email=".concat(encodeURIComponent(R.email),"&category=").concat(r,"&subcategory=").concat(h)),t=await e.json();v(t.isSubscribed)}catch(e){console.error("Abonelik kontrol\xfc yapılamadı:",e)}},W=async()=>{if(!R.email||!R.email.includes("@"))return void E("L\xfctfen ge\xe7erli bir email adresi girin.");w(!0),E("");try{let e=await fetch("/api/notifications/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:R.email,category:R.category,subcategory:R.subcategory,keywords:R.keywords?R.keywords.split(",").map(e=>e.trim()):[],priceRange:R.priceMin||R.priceMax?{min:R.priceMin?parseInt(R.priceMin):void 0,max:R.priceMax?parseInt(R.priceMax):void 0}:void 0,location:R.location,frequency:R.frequency})}),t=await e.json();e.ok?(v(!0),E("Abonelik başarıyla oluşturuldu! Yeni ilanlardan anında haberdar olacaksınız."),N(!1)):E(t.error||"Abonelik oluşturulamadı.")}catch(e){E("Bir hata oluştu. L\xfctfen tekrar deneyin.")}finally{w(!1)}},q=async()=>{w(!0),E("");try{(await fetch("/api/notifications/subscription",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:r,subcategory:h})})).ok?(v(!1),E("Abonelik iptal edildi.")):E("Abonelik iptal edilemedi.")}catch(e){E("Bir hata oluştu. L\xfctfen tekrar deneyin.")}finally{w(!1)}};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto",children:[b&&(0,a.jsx)("button",{onClick:b,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(i.A,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(o.A,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Yeni İlanlardan Haberdar Ol"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Bu kategorideki yeni ilanlardan anında haberdar olmak i\xe7in abone olun."})]}),A&&(0,a.jsx)("div",{className:"mb-4 p-3 rounded-lg text-sm ".concat(A.includes("başarıyla")||A.includes("iptal")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:A}),y?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-green-600 mr-2"}),(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"Abone Olundu"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Bu kategorideki yeni ilanlardan haberdar olacaksınız."}),(0,a.jsxs)("button",{onClick:q,disabled:j,className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),j?"İptal Ediliyor...":"Aboneliği İptal Et"]})]}):k?(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),W()},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta Adresi"}),(0,a.jsx)("input",{type:"email",value:R.email,onChange:e=>O(t=>({...t,email:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ornek@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),(0,a.jsxs)("select",{value:R.category,onChange:e=>{var t;return t=e.target.value,void(O(e=>({...e,category:t,subcategory:""})),t?P(t):S([]))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"T\xfcm Kategoriler"}),C.map(e=>(0,a.jsx)("option",{value:e.slug,children:e.name},e.slug))]})]}),R.category&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alt Kategori"}),(0,a.jsxs)("select",{value:R.subcategory,onChange:e=>O(t=>({...t,subcategory:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"T\xfcm Alt Kategoriler"}),M.map(e=>(0,a.jsx)("option",{value:e.slug,children:e.name},e.slug))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anahtar Kelimeler"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:R.keywords,onChange:e=>O(t=>({...t,keywords:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"telefon, iphone, samsung (virg\xfclle ayırın)"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Fiyat"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"number",value:R.priceMin,onChange:e=>O(t=>({...t,priceMin:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Fiyat"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"number",value:R.priceMax,onChange:e=>O(t=>({...t,priceMax:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10000"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konum"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:R.location,onChange:e=>O(t=>({...t,location:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İstanbul, Ankara, İzmir..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bildirim Sıklığı"}),(0,a.jsxs)("select",{value:R.frequency,onChange:e=>O(t=>({...t,frequency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"instant",children:"Anında"}),(0,a.jsx)("option",{value:"daily",children:"G\xfcnl\xfck \xd6zet"}),(0,a.jsx)("option",{value:"weekly",children:"Haftalık \xd6zet"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{type:"submit",disabled:j,className:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),j?"Abone Olunuyor...":"Abone Ol"]}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"})]})]}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("button",{onClick:()=>f.push("/bildirim-tercihleri"),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"Detayları G\xf6r\xfcnt\xfcle"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Bildirim tercihlerinizi y\xf6netmek i\xe7in tıklayın"})]})]})}},74500:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},78046:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(12115);let l=a.forwardRef(function(e,t){let{title:r,titleId:l,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))})}}]);