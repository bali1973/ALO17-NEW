(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7162],{19468:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>i});var s=l(95155),a=l(12115);function i(){let[e,t]=(0,a.useState)([]),[l,i]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[x,o]=(0,a.useState)(!1);(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await fetch("/api/raporlar"),l=await e.json();t(l),i(!1)}catch(e){n("Bildirimler y\xfcklenemedi"),i(!1)}},h=async()=>{try{let l=e.map(e=>({...e,status:"\xc7\xf6z\xfcld\xfc"}));(await fetch("/api/raporlar",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"markAllAsRead"})})).ok?(t(l),alert("T\xfcm bildirimler okundu olarak işaretlendi!")):alert("İşlem sırasında bir hata oluştu")}catch(e){alert("İşlem sırasında bir hata oluştu")}},u=async l=>{if(confirm("Bu bildirimi silmek istediğinizden emin misiniz?"))try{(await fetch("/api/raporlar/".concat(l),{method:"DELETE"})).ok?(t(e.filter(e=>e.id!==l)),alert("Bildirim silindi!"),(null==d?void 0:d.id)===l&&b()):alert("Silme işlemi sırasında bir hata oluştu")}catch(e){alert("Silme işlemi sırasında bir hata oluştu")}},y=async(l,s)=>{try{(await fetch("/api/raporlar/".concat(l),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s})})).ok?(t(e.map(e=>e.id===l?{...e,status:s}:e)),alert("Bildirim durumu g\xfcncellendi!"),b()):alert("G\xfcncelleme sırasında bir hata oluştu")}catch(e){alert("G\xfcncelleme sırasında bir hata oluştu")}},b=()=>{o(!1),c(null)};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"İlan Bildirimleri"}),(0,s.jsx)("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"T\xfcm\xfcn\xfc Okundu Olarak İşaretle"})]}),l&&(0,s.jsx)("div",{className:"text-center py-8",children:"Y\xfckleniyor..."}),r&&(0,s.jsx)("div",{className:"text-red-600 bg-red-50 p-4 rounded-lg",children:r}),!l&&!r&&(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"ID"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"T\xfcr"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Konu"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Tarih"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Durum"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"İşlemler"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:e.id}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:"İlan Şikayeti"===e.type?"İlan Şikayeti":"Kullanıcı Şikayeti"===e.type?"Kullanıcı Şikayeti":e.type}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900 max-w-xs truncate",title:e.subject,children:e.subject}),(0,s.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.date}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat("A\xe7ık"===e.status?"bg-yellow-100 text-yellow-800":"\xc7\xf6z\xfcld\xfc"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{c(e),o(!0)},className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors",children:"Detay"}),(0,s.jsx)("button",{onClick:()=>u(e.id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",children:"Sil"})]})})]},e.id))})]})}),x&&d&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Bildirim Detayı"}),(0,s.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"ID:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:d.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xfcr:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:d.type})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Konu:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:d.subject})]}),d.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"A\xe7ıklama:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:d.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tarih:"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:d.date})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Durum:"}),(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat("A\xe7ık"===d.status?"bg-yellow-100 text-yellow-800":"\xc7\xf6z\xfcld\xfc"===d.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:d.status})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,s.jsx)("button",{onClick:()=>y(d.id,"\xc7\xf6z\xfcld\xfc"),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors",children:"\xc7\xf6z\xfcld\xfc Olarak İşaretle"}),(0,s.jsx)("button",{onClick:()=>y(d.id,"A\xe7ık"),className:"flex-1 bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700 transition-colors",children:"A\xe7ık Olarak İşaretle"})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("button",{onClick:()=>u(d.id),className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Sil"})})]})})]})}},91691:(e,t,l)=>{Promise.resolve().then(l.bind(l,19468))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=91691)),_N_E=e.O()}]);