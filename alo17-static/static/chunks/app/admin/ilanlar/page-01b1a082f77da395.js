(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{6654:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=l(12115);function a(e,t){let l=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=l.current;e&&(l.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(l.current=r(e,s)),t&&(a.current=r(t,s))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let l=e(t);return"function"==typeof l?l:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},29337:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var s=l(12115);let a=s.forwardRef(function(e,t){let{title:l,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),l?s.createElement("title",{id:a},l):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},31151:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var s=l(12115);let a=s.forwardRef(function(e,t){let{title:l,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),l?s.createElement("title",{id:a},l):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},34994:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>u});var s=l(95155),a=l(12115),r=l(29337),n=l(74500),i=l(61316),c=l(10184),d=l(31151),o=l(80353);function u(){var e,t;let[l,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),[m,p]=(0,a.useState)(null),[g,j]=(0,a.useState)(null),[y,f]=(0,a.useState)(null),[v,b]=(0,a.useState)({title:"",description:"",price:0,category:"",city:"",status:""});(0,a.useEffect)(()=>{N()},[]);let N=async()=>{try{let e=await fetch("/api/listings"),t=await e.json(),l=Array.isArray(t)?t:t.listings||[];u(l),h(!1)}catch(e){p("İlanlar y\xfcklenemedi"),h(!1)}},w=async e=>{try{(await fetch("/api/admin/listings/".concat(e,"/approve"),{method:"PUT"})).ok&&N()}catch(e){}},k=async e=>{try{(await fetch("/api/admin/listings/".concat(e,"/reject"),{method:"PUT"})).ok&&N()}catch(e){}},C=async e=>{if(window.confirm("Bu ilanı silmek istediğinize emin misiniz?"))try{(await fetch("/api/admin/listings/".concat(e,"/delete"),{method:"DELETE"})).ok&&N()}catch(e){}},L=async e=>{try{(await fetch("/api/admin/listings/".concat(e,"/update"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok&&(f(null),N())}catch(e){console.error("G\xfcncelleme hatası:",e)}},E=()=>{f(null)};return x?(0,s.jsx)("div",{className:"text-center py-8",children:"Y\xfckleniyor..."}):m?(0,s.jsx)("div",{className:"text-red-600 text-center py-8",children:m}):(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-8 bg-white rounded-lg shadow-md mt-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"İlan Y\xf6netimi"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"ID"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Başlık"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Kategori"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Fiyat"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Şehir"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Durum"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Kullanıcı"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Tarih"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"İşlemler"})]})}),(0,s.jsx)("tbody",{children:Array.isArray(l)&&l.length>0?l.map(e=>{var t;return(0,s.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,s.jsx)("td",{className:"py-3 px-4",children:y===e.id?(0,s.jsx)("input",{type:"text",value:v.title,onChange:e=>b({...v,title:e.target.value}),className:"border rounded px-2 py-1 w-full"}):e.title}),(0,s.jsx)("td",{className:"py-3 px-4",children:y===e.id?(0,s.jsx)("input",{type:"text",value:v.category,onChange:e=>b({...v,category:e.target.value}),className:"border rounded px-2 py-1 w-full"}):e.category}),(0,s.jsx)("td",{className:"py-3 px-4",children:y===e.id?(0,s.jsx)("input",{type:"number",value:v.price,onChange:e=>b({...v,price:Number(e.target.value)}),className:"border rounded px-2 py-1 w-full"}):"".concat(e.price," ₺")}),(0,s.jsx)("td",{className:"py-3 px-4",children:y===e.id?(0,s.jsx)("input",{type:"text",value:v.city,onChange:e=>b({...v,city:e.target.value}),className:"border rounded px-2 py-1 w-full"}):e.city}),(0,s.jsx)("td",{className:"py-3 px-4",children:y===e.id?(0,s.jsxs)("select",{value:v.status,onChange:e=>b({...v,status:e.target.value}),className:"border rounded px-2 py-1 w-full",children:[(0,s.jsx)("option",{value:"pending",children:"Beklemede"}),(0,s.jsx)("option",{value:"approved",children:"Onaylandı"}),(0,s.jsx)("option",{value:"rejected",children:"Reddedildi"})]}):(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"approved"===e.status?"Onaylandı":"rejected"===e.status?"Reddedildi":"Beklemede"})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(null==(t=e.user)?void 0:t.name)||"Bilinmiyor"}),(0,s.jsx)("td",{className:"py-3 px-4",children:new Date(e.createdAt).toLocaleDateString("tr-TR")}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("div",{className:"flex space-x-2",children:y===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>L(e.id),className:"text-green-600 hover:text-green-900",title:"Kaydet",children:(0,s.jsx)(r.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:E,className:"text-gray-600 hover:text-gray-900",title:"İptal",children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{f(e.id),b({title:e.title,description:e.description,price:e.price,category:e.category,city:e.city,status:e.status})},className:"text-blue-600 hover:text-blue-900",title:"D\xfczenle",children:(0,s.jsx)(i.A,{className:"h-4 w-4"})}),"pending"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-green-600 hover:text-green-900",title:"Onayla",children:(0,s.jsx)(r.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>k(e.id),className:"text-red-600 hover:text-red-900",title:"Reddet",children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("button",{onClick:()=>j(e),className:"text-purple-600 hover:text-purple-900",title:"Detay",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:()=>C(e.id),className:"text-red-600 hover:text-red-900",title:"Sil",children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]})})})]},e.id)}):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,className:"py-8 text-center text-gray-500",children:"Hen\xfcz ilan bulunmuyor"})})})]})}),g&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative",children:[(0,s.jsx)("button",{onClick:()=>j(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-xl",children:"\xd7"}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"İlan Detayı"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"İlan Resimleri"}),g.images&&g.images.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.images.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(o.A,{src:e,alt:"".concat(g.title," - Resim ").concat(t+1),width:300,height:200,className:"w-full h-48 object-cover rounded-lg shadow-md",priority:0===t}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 font-medium",children:["Resim ",t+1]})})]},t))}):(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg p-8 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-200 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsx)("p",{className:"text-gray-500",children:"Bu ilan i\xe7in resim bulunmuyor"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"ID:"})," ",g.id]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Başlık:"})," ",g.title]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Kategori:"})," ",g.category]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Fiyat:"})," ",g.price," ₺"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Şehir:"})," ",g.city]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Durum:"}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat("approved"===g.status?"bg-green-100 text-green-800":"rejected"===g.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"approved"===g.status?"Onaylandı":"rejected"===g.status?"Reddedildi":"Beklemede"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Kullanıcı:"})," ",(null==(e=g.user)?void 0:e.name)||"Bilinmiyor"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",(null==(t=g.user)?void 0:t.email)||"Bilinmiyor"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Tarih:"})," ",new Date(g.createdAt).toLocaleDateString("tr-TR")]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("strong",{children:"A\xe7ıklama:"}),(0,s.jsx)("div",{className:"bg-gray-100 rounded p-3 mt-1",children:g.description})]})]})]})})]})}},61316:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var s=l(12115);let a=s.forwardRef(function(e,t){let{title:l,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),l?s.createElement("title",{id:a},l):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},69781:(e,t,l)=>{Promise.resolve().then(l.bind(l,34994))},74500:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var s=l(12115);let a=s.forwardRef(function(e,t){let{title:l,titleId:a,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),l?s.createElement("title",{id:a},l):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})}},e=>{e.O(0,[3063,4360,8441,5964,7358],()=>e(e.s=69781)),_N_E=e.O()}]);