(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6448],{28162:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>i});var a=l(95155),t=l(12115);function i(){let[e,s]=(0,t.useState)([]),[l,i]=(0,t.useState)(!0),[r,d]=(0,t.useState)(null),[n,c]=(0,t.useState)(""),[x,h]=(0,t.useState)(null);(0,t.useEffect)(()=>{fetch("/api/messages").then(e=>e.json()).then(e=>{s(e),i(!1)}).catch(()=>{d("Mesajlar y\xfcklenemedi"),i(!1)})},[]);let o=async e=>{window.confirm("Bu mesajı silmek istediğinize emin misiniz?")&&((await fetch("/api/messages/".concat(e),{method:"DELETE"})).ok?(s(s=>s.filter(s=>s.id!==e)),x&&x.id===e&&h(null)):alert("Mesaj silinemedi!"))},m=e.filter(e=>{var s,l,a;return((null==(s=e.sender)?void 0:s.toLowerCase())||"").includes(n.toLowerCase())||((null==(l=e.receiver)?void 0:l.toLowerCase())||"").includes(n.toLowerCase())||((null==(a=e.content)?void 0:a.toLowerCase())||"").includes(n.toLowerCase())});return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto p-8 bg-white rounded-lg shadow-md mt-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Mesajlar"}),(0,a.jsx)("div",{className:"mb-4 flex items-center gap-4",children:(0,a.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),placeholder:"G\xf6nderen, alıcı veya i\xe7erikte ara...",className:"border border-gray-300 rounded px-3 py-2 w-80"})}),l&&(0,a.jsx)("div",{children:"Y\xfckleniyor..."}),r&&(0,a.jsx)("div",{className:"text-red-600",children:r}),!l&&!r&&(0,a.jsxs)("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"ID"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"G\xf6nderen"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Alıcı"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"İ\xe7erik"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Tarih"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"İşlemler"})]})}),(0,a.jsx)("tbody",{children:m.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"py-2 px-4",children:e.id}),(0,a.jsx)("td",{className:"py-2 px-4",children:e.sender||"Bilinmiyor"}),(0,a.jsx)("td",{className:"py-2 px-4",children:e.receiver||"Bilinmiyor"}),(0,a.jsx)("td",{className:"py-2 px-4 line-clamp-1 max-w-xs",children:e.content||"İ\xe7erik yok"}),(0,a.jsx)("td",{className:"py-2 px-4",children:e.date||"Tarih yok"}),(0,a.jsxs)("td",{className:"py-2 px-4",children:[(0,a.jsx)("button",{onClick:()=>h(e),className:"bg-blue-500 text-white px-3 py-1 rounded mr-2",children:"Detay"}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"bg-red-500 text-white px-3 py-1 rounded",children:"Sil"})]})]},e.id))})]}),x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-lg w-full relative",children:[(0,a.jsx)("button",{onClick:()=>h(null),className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl",children:"\xd7"}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Mesaj Detayı"}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("b",{children:"ID:"})," ",x.id]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("b",{children:"G\xf6nderen:"})," ",x.sender||"Bilinmiyor"]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Alıcı:"})," ",x.receiver||"Bilinmiyor"]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("b",{children:"Tarih:"})," ",x.date||"Tarih yok"]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("b",{children:"İ\xe7erik:"})," ",(0,a.jsx)("div",{className:"bg-gray-100 rounded p-2 mt-1 whitespace-pre-line",children:x.content||"İ\xe7erik yok"})]})]})})]})}},77525:(e,s,l)=>{Promise.resolve().then(l.bind(l,28162))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=77525)),_N_E=e.O()}]);