(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{37166:(e,t,s)=>{Promise.resolve().then(s.bind(s,40875))},40875:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var r=s(95155),a=s(12115),n=s(83540),i=s(90170),l=s(18357),o=s(54811),c=s(24021),d=s(8401),h=s(94754),u=s(96025),m=s(52071),g=s(39219);class x{static getInstance(){return x.instance||(x.instance=new x),x.instance}generateSessionId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}setupEventListeners(){window.addEventListener("online",async()=>{this.isOnline=!0,await this.flushQueues()}),window.addEventListener("offline",()=>{this.isOnline=!1}),window.addEventListener("error",e=>{var t;this.captureError({message:e.message,stack:null==(t=e.error)?void 0:t.stack,timestamp:new Date,url:window.location.href,userAgent:navigator.userAgent,severity:"medium",category:"javascript",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener("unhandledrejection",e=>{var t,s;this.captureError({message:(null==(t=e.reason)?void 0:t.message)||"Unhandled Promise Rejection",stack:null==(s=e.reason)?void 0:s.stack,timestamp:new Date,url:window.location.href,userAgent:navigator.userAgent,severity:"high",category:"javascript",metadata:{reason:e.reason}})}),"PerformanceObserver"in window&&(new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"navigation"===e.entryType&&this.capturePerformance({name:"page_load",duration:e.loadEventEnd-e.loadEventStart,timestamp:new Date,url:window.location.href,category:"navigation",metadata:{domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,firstPaint:e.loadEventEnd-e.loadEventStart,totalTime:e.loadEventEnd-e.fetchStart}})})}).observe({entryTypes:["navigation"]}),new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"resource"===e.entryType&&this.capturePerformance({name:"resource_load",duration:e.duration,timestamp:new Date,url:window.location.href,category:"resource",metadata:{resourceName:e.name,resourceType:e.initiatorType,transferSize:e.transferSize}})})}).observe({entryTypes:["resource"]}))}setupPeriodicFlush(){setInterval(async()=>{await this.flushQueues()},3e4)}captureError(e){let t={...e,sessionId:this.sessionId};this.errorQueue.push(t),"critical"===e.severity&&this.flushErrorQueue().catch(console.error),console.error("Captured Error:",{message:t.message,severity:t.severity,category:t.category,timestamp:t.timestamp,url:t.url})}capturePerformance(e){let t={...e,sessionId:this.sessionId};this.performanceQueue.push(t)}captureUserEvent(e){let t={...e,sessionId:this.sessionId,timestamp:new Date};this.userEventQueue.push(t)}async flushErrorQueue(){if(0===this.errorQueue.length||!this.isOnline)return;let e=[...this.errorQueue];this.errorQueue=[];try{await fetch("/api/monitoring/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errors:e})})}catch(t){this.errorQueue.unshift(...e),console.error("Error flushing error queue:",t)}}async flushPerformanceQueue(){if(0===this.performanceQueue.length||!this.isOnline)return;let e=[...this.performanceQueue];this.performanceQueue=[];try{await fetch("/api/monitoring/performance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({performance:e})})}catch(t){this.performanceQueue.unshift(...e),console.error("Error flushing performance queue:",t)}}async flushUserEventQueue(){if(0===this.userEventQueue.length||!this.isOnline)return;let e=[...this.userEventQueue];this.userEventQueue=[];try{await fetch("/api/monitoring/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})})}catch(t){this.userEventQueue.unshift(...e),console.error("Error flushing user event queue:",t)}}async flushQueues(){await Promise.all([this.flushErrorQueue(),this.flushPerformanceQueue(),this.flushUserEventQueue()])}trackPageView(e){this.captureUserEvent({event:"page_view",url:e,properties:{page:e,referrer:document.referrer}})}trackButtonClick(e,t){this.captureUserEvent({event:"button_click",url:window.location.href,properties:{button_name:e,...t}})}trackFormSubmission(e,t,s){this.captureUserEvent({event:"form_submission",url:window.location.href,properties:{form_name:e,success:t,...s}})}trackAPIError(e,t,s){this.captureError({message:"API Error: ".concat(e),timestamp:new Date,url:window.location.href,userAgent:navigator.userAgent,severity:t>=500?"high":"medium",category:"api",metadata:{endpoint:e,status:t,error:s}})}trackCustomEvent(e,t){this.captureUserEvent({event:e,url:window.location.href,properties:t})}getSessionId(){return this.sessionId}isUserOnline(){return this.isOnline}constructor(){this.errorQueue=[],this.performanceQueue=[],this.userEventQueue=[],this.isOnline=navigator.onLine,this.sessionId=this.generateSessionId(),this.setupEventListeners(),this.setupPeriodicFlush()}}function p(e){let{timeRange:t="24h",refreshInterval:s=3e4}=e,[p,v]=(0,a.useState)(t),[f,y]=(0,a.useState)(null),[w,j]=(0,a.useState)(!0),[b,N]=(0,a.useState)(null),[E,k]=(0,a.useState)(new Date),S=function(){let e=x.getInstance();return{trackPageView:e.trackPageView.bind(e),trackButtonClick:e.trackButtonClick.bind(e),trackFormSubmission:e.trackFormSubmission.bind(e),trackCustomEvent:e.trackCustomEvent.bind(e),trackAPIError:e.trackAPIError.bind(e),captureError:e.captureError.bind(e),capturePerformance:e.capturePerformance.bind(e),captureUserEvent:e.captureUserEvent.bind(e),getSessionId:e.getSessionId.bind(e),isUserOnline:e.isUserOnline.bind(e)}}();(0,a.useEffect)(()=>{P();let e=setInterval(()=>{P()},s);return()=>clearInterval(e)},[p,s]);let P=async()=>{try{j(!0);let e=await fetch("/api/monitoring/dashboard?timeRange=".concat(p));if(e.ok){let t=await e.json();y(t),k(new Date)}else throw Error("Monitoring verileri y\xfcklenemedi")}catch(e){N(e instanceof Error?e.message:"Bir hata oluştu")}finally{j(!1)}},Q=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#FF6B6B"];if(w&&!f)return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Monitoring verileri y\xfckleniyor..."})]})});if(b)return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"text-center text-red-600",children:[(0,r.jsx)("p",{children:b}),(0,r.jsx)("button",{onClick:P,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Tekrar Dene"})]})});if(!f)return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsx)("div",{className:"text-center text-gray-600",children:(0,r.jsx)("p",{children:"Monitoring verisi bulunamadı"})})});let C=e=>"".concat((100*e).toFixed(2),"%");return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Monitoring Dashboard"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex space-x-2",children:["1h","24h","7d","30d"].map(e=>(0,r.jsx)("button",{onClick:()=>v(e),className:"px-3 py-1 rounded-lg text-sm font-medium ".concat(p===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"1h"===e?"1 Saat":"24h"===e?"24 Saat":"7d"===e?"7 G\xfcn":"30 G\xfcn"},e))}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Son g\xfcncelleme: ",E.toLocaleTimeString("tr-TR")]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Uptime"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(e=>{let t=Math.floor(e/86400),s=Math.floor(e%86400/3600),r=Math.floor(e%3600/60);return"".concat(t,"g ").concat(s,"s ").concat(r,"d")})(f.systemHealth.uptime)})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Aktif Kullanıcı"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.systemHealth.activeUsers})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Toplam İstek"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.systemHealth.totalRequests.toLocaleString()})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(f.systemHealth.errorRate<.01?"bg-green-100":f.systemHealth.errorRate<.05?"bg-yellow-100":"bg-red-100"),children:(0,r.jsx)("svg",{className:"w-6 h-6 ".concat(f.systemHealth.errorRate<.01?"text-green-600":f.systemHealth.errorRate<.05?"text-yellow-600":"text-red-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Hata Oranı"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C(f.systemHealth.errorRate)})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hata Dağılımı"}),(0,r.jsx)(n.u,{width:"100%",height:300,children:(0,r.jsxs)(i.r,{children:[(0,r.jsx)(l.F,{data:f.errors,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{category:t,count:s}=e;return"".concat(t," (").concat(s,")")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:f.errors.map((e,t)=>(0,r.jsx)(o.f,{fill:Q[t%Q.length]},"cell-".concat(t)))}),(0,r.jsx)(c.m,{})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performans Metrikleri"}),(0,r.jsx)(n.u,{width:"100%",height:300,children:(0,r.jsxs)(d.E,{data:f.performance,children:[(0,r.jsx)(h.d,{strokeDasharray:"3 3"}),(0,r.jsx)(u.W,{dataKey:"name"}),(0,r.jsx)(m.h,{}),(0,r.jsx)(c.m,{}),(0,r.jsx)(g.y,{dataKey:"avgDuration",fill:"#3B82F6",name:"Ortalama S\xfcre (ms)"})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kullanıcı Olayları"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Olay"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sayı"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Y\xfczde"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.userEvents.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.event}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(e.count||0).toLocaleString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C(e.percentage)})]},t))})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sistem Kaynakları"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,r.jsx)("span",{children:"CPU Kullanımı"}),(0,r.jsx)("span",{children:C(f.systemHealth.cpuUsage)})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(100*f.systemHealth.cpuUsage,"%")}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,r.jsx)("span",{children:"Bellek Kullanımı"}),(0,r.jsx)("span",{children:C(f.systemHealth.memoryUsage)})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(100*f.systemHealth.memoryUsage,"%")}})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hızlı Aksiyonlar"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:P,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Verileri Yenile"}),(0,r.jsx)("button",{onClick:()=>S.trackCustomEvent("manual_refresh"),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Test Olayı G\xf6nder"}),(0,r.jsx)("button",{onClick:()=>{let e=Error("Test error for monitoring");S.captureError({message:e.message,stack:e.stack||"",timestamp:new Date,url:window.location.href,userAgent:navigator.userAgent,severity:"low",category:"javascript",metadata:{test:!0}})},className:"w-full px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Test Hatası G\xf6nder"})]})]})]})]})}x.getInstance()}},e=>{e.O(0,[8022,8441,5964,7358],()=>e(e.s=37166)),_N_E=e.O()}]);