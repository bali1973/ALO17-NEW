(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3042],{19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var l=s(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,l.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:x,...m}=e;return(0,l.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:s,strokeWidth:d?24*Number(n)/Number(a):n,className:r("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[t,s]=e;return(0,l.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let s=(0,l.forwardRef)((s,i)=>{let{className:d,...c}=s;return(0,l.createElement)(n,{ref:i,iconNode:t,className:r("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return s.displayName=a(e),s}},40646:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},47924:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},54416:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},73099:(e,t,s)=>{Promise.resolve().then(s.bind(s,88884))},85339:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(19946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},88884:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var l=s(95155),a=s(12115),r=s(40646),i=s(47924),n=s(92657),d=s(54416),c=s(85339);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(""),[y,b]=(0,a.useState)("all"),[j,f]=(0,a.useState)("all"),[N,k]=(0,a.useState)("all"),[v,w]=(0,a.useState)(null),[A,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{fetch("/api/raporlar").then(e=>e.json()).then(e=>{t(e),o(e),m(!1)}).catch(()=>{h("Raporlar y\xfcklenemedi"),m(!1)})},[]),(0,a.useEffect)(()=>{let t=e;if(p&&(t=t.filter(e=>e.subject.toLowerCase().includes(p.toLowerCase())||e.type.toLowerCase().includes(p.toLowerCase())||e.description&&e.description.toLowerCase().includes(p.toLowerCase()))),"all"!==y&&(t=t.filter(e=>e.status===y)),"all"!==j&&(t=t.filter(e=>e.type===j)),"all"!==N){let e=new Date,s=new Date;switch(N){case"today":t=t.filter(t=>t.date===e.toISOString().slice(0,10));break;case"week":s.setDate(e.getDate()-7),t=t.filter(e=>new Date(e.date)>=s);break;case"month":s.setMonth(e.getMonth()-1),t=t.filter(e=>new Date(e.date)>=s)}}o(t)},[e,p,y,j,N]);let C=async(s,l)=>{try{(await fetch("/api/raporlar/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:l})})).ok?(t(e.map(e=>e.id===s?{...e,status:l}:e)),alert("Rapor durumu g\xfcncellendi!"),z(!1)):alert("G\xfcncelleme sırasında bir hata oluştu")}catch(e){alert("G\xfcncelleme sırasında bir hata oluştu")}},S=async s=>{if(confirm("Bu raporu silmek istediğinizden emin misiniz?"))try{(await fetch("/api/raporlar/".concat(s),{method:"DELETE"})).ok?(t(e.filter(e=>e.id!==s)),alert("Rapor silindi!"),z(!1)):alert("Silme işlemi sırasında bir hata oluştu")}catch(e){alert("Silme işlemi sırasında bir hata oluştu")}},T=async()=>{if(confirm("T\xfcm a\xe7ık raporları \xe7\xf6z\xfcld\xfc olarak işaretlemek istediğinizden emin misiniz?"))try{(await fetch("/api/raporlar",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"markAllAsRead"})})).ok?(t(e.map(e=>({...e,status:"\xc7\xf6z\xfcld\xfc"}))),alert("T\xfcm raporlar \xe7\xf6z\xfcld\xfc olarak işaretlendi!")):alert("İşlem sırasında bir hata oluştu")}catch(e){alert("İşlem sırasında bir hata oluştu")}},R=e=>{switch(e){case"A\xe7ık":return"bg-yellow-100 text-yellow-800";case"\xc7\xf6z\xfcld\xfc":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},D=e=>{switch(e){case"İlan Şikayeti":return"bg-red-100 text-red-800";case"Kullanıcı Şikayeti":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},E={total:e.length,open:e.filter(e=>"A\xe7ık"===e.status).length,resolved:e.filter(e=>"\xc7\xf6z\xfcld\xfc"===e.status).length,listingReports:e.filter(e=>"İlan Şikayeti"===e.type).length,userReports:e.filter(e=>"Kullanıcı Şikayeti"===e.type).length};return(0,l.jsxs)("div",{className:"max-w-7xl mx-auto p-8 bg-white rounded-lg shadow-md mt-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Raporlar Y\xf6netimi"}),(0,l.jsxs)("button",{onClick:T,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[(0,l.jsx)(r.A,{size:16}),"T\xfcm\xfcn\xfc \xc7\xf6z\xfcld\xfc İşaretle"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:E.total}),(0,l.jsx)("div",{className:"text-sm text-blue-600",children:"Toplam Rapor"})]}),(0,l.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:E.open}),(0,l.jsx)("div",{className:"text-sm text-yellow-600",children:"A\xe7ık Rapor"})]}),(0,l.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:E.resolved}),(0,l.jsx)("div",{className:"text-sm text-green-600",children:"\xc7\xf6z\xfcld\xfc"})]}),(0,l.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:E.listingReports}),(0,l.jsx)("div",{className:"text-sm text-red-600",children:"İlan Şikayeti"})]}),(0,l.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:E.userReports}),(0,l.jsx)("div",{className:"text-sm text-blue-600",children:"Kullanıcı Şikayeti"})]})]}),(0,l.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,l.jsx)("input",{type:"text",placeholder:"Rapor ara...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,l.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"T\xfcm Durumlar"}),(0,l.jsx)("option",{value:"A\xe7ık",children:"A\xe7ık"}),(0,l.jsx)("option",{value:"\xc7\xf6z\xfcld\xfc",children:"\xc7\xf6z\xfcld\xfc"})]}),(0,l.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"T\xfcm T\xfcrler"}),(0,l.jsx)("option",{value:"İlan Şikayeti",children:"İlan Şikayeti"}),(0,l.jsx)("option",{value:"Kullanıcı Şikayeti",children:"Kullanıcı Şikayeti"})]}),(0,l.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"T\xfcm Tarihler"}),(0,l.jsx)("option",{value:"today",children:"Bug\xfcn"}),(0,l.jsx)("option",{value:"week",children:"Son 7 G\xfcn"}),(0,l.jsx)("option",{value:"month",children:"Son 30 G\xfcn"})]})]})}),x&&(0,l.jsx)("div",{className:"text-center py-8",children:"Y\xfckleniyor..."}),u&&(0,l.jsx)("div",{className:"text-red-600 bg-red-50 p-4 rounded-lg",children:u}),!x&&!u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:[s.length," rapor bulundu"]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"ID"}),(0,l.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"T\xfcr"}),(0,l.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Konu"}),(0,l.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Tarih"}),(0,l.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"Durum"}),(0,l.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-gray-700",children:"İşlemler"})]})}),(0,l.jsx)("tbody",{children:s.map(e=>(0,l.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,l.jsxs)("td",{className:"py-3 px-4 text-sm text-gray-900",children:["#",e.id]}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(D(e.type)),children:e.type})}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900 max-w-xs truncate",title:e.subject,children:e.subject}),(0,l.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.date}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(R(e.status)),children:e.status})}),(0,l.jsx)("td",{className:"py-3 px-4",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("button",{onClick:()=>{w(e),z(!0)},className:"bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors flex items-center gap-1",children:[(0,l.jsx)(n.A,{size:12}),"Detay"]}),"A\xe7ık"===e.status&&(0,l.jsxs)("button",{onClick:()=>C(e.id,"\xc7\xf6z\xfcld\xfc"),className:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors flex items-center gap-1",children:[(0,l.jsx)(r.A,{size:12}),"\xc7\xf6z\xfcld\xfc"]}),(0,l.jsxs)("button",{onClick:()=>S(e.id),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors flex items-center gap-1",children:[(0,l.jsx)(d.A,{size:12}),"Sil"]})]})})]},e.id))})]})})]}),A&&v&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Rapor Detayı"}),(0,l.jsx)("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rapor ID:"}),(0,l.jsxs)("p",{className:"text-sm text-gray-900",children:["#",v.id]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xfcr:"}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(D(v.type)),children:v.type})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Konu:"}),(0,l.jsx)("p",{className:"text-sm text-gray-900",children:v.subject})]}),v.description&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"A\xe7ıklama:"}),(0,l.jsx)("p",{className:"text-sm text-gray-900",children:v.description})]}),v.user&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Rapor Eden:"}),(0,l.jsx)("p",{className:"text-sm text-gray-900",children:v.user})]}),v.priority&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\xd6ncelik:"}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat("high"===v.priority?"bg-red-100 text-red-800":"medium"===v.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"high"===v.priority?"Y\xfcksek":"medium"===v.priority?"Orta":"D\xfcş\xfck"})]}),v.listingTitle&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"İlan:"}),(0,l.jsx)("p",{className:"text-sm text-gray-900",children:v.listingTitle})]}),v.reportedUserEmail&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Şikayet Edilen Kullanıcı:"}),(0,l.jsx)("p",{className:"text-sm text-gray-900",children:v.reportedUserEmail})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tarih:"}),(0,l.jsx)("p",{className:"text-sm text-gray-900",children:v.date})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Durum:"}),(0,l.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(R(v.status)),children:v.status})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 mt-6",children:["A\xe7ık"===v.status&&(0,l.jsxs)("button",{onClick:()=>C(v.id,"\xc7\xf6z\xfcld\xfc"),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[(0,l.jsx)(r.A,{size:16}),"\xc7\xf6z\xfcld\xfc Olarak İşaretle"]}),"\xc7\xf6z\xfcld\xfc"===v.status&&(0,l.jsxs)("button",{onClick:()=>C(v.id,"A\xe7ık"),className:"flex-1 bg-yellow-600 text-white py-2 px-4 rounded hover:bg-yellow-700 transition-colors flex items-center justify-center gap-2",children:[(0,l.jsx)(c.A,{size:16}),"A\xe7ık Olarak İşaretle"]})]}),(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsxs)("button",{onClick:()=>S(v.id),className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[(0,l.jsx)(d.A,{size:16}),"Raporu Sil"]})})]})})]})}},92657:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=73099)),_N_E=e.O()}]);