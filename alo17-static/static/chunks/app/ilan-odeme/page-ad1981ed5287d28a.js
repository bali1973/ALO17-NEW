(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1924],{4638:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var l=s(95155),r=s(12115),t=s(35695);let i="ilanOdemeInvoice",d={featured:"\xd6ne \xc7ıkan İlan",urgent:"Acil İlan",highlighted:"Vurgulanmış İlan",top:"\xdcst Sırada G\xf6ster",bump:"Yukarı Taşı",spotlight:"Spot Işık",priority:"\xd6ncelikli İlan",premium:"Premium İlan"};function n(){var e,a;(0,t.useRouter)();let[s,n]=(0,r.useState)(null),[c,m]=(0,r.useState)(!0),[u,o]=(0,r.useState)(""),[h,x]=(0,r.useState)(!1),[p,b]=(0,r.useState)(1),[j,v]=(0,r.useState)("bireysel"),[f,N]=(0,r.useState)({name:"",address:"",tc:"",company:"",taxOffice:"",taxNo:"",authorized:""}),[g,y]=(0,r.useState)({}),[P,k]=(0,r.useState)({}),[S,w]=(0,r.useState)("");return((0,r.useEffect)(()=>{let e=localStorage.getItem("pendingListing");e&&n(JSON.parse(e)),fetch("/api/premium-feature-prices").then(e=>e.json()).then(y).catch(()=>y({})),fetch("/api/premium-plans").then(e=>e.json()).then(k).catch(()=>k({})),m(!1)},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem(i);if(e){var a;let s=JSON.parse(e);v(null!=(a=s.invoiceType)?a:"bireysel"),N(e=>({...e,...s.invoiceInfo}))}},[]),(0,r.useEffect)(()=>{localStorage.setItem(i,JSON.stringify({invoiceType:j,invoiceInfo:f}))},[j,f]),(0,r.useEffect)(()=>{if(2===p&&!S){var e;let a=(s.selectedPremiumPlan&&"free"!==s.selectedPremiumPlan&&(null==(e=P[s.selectedPremiumPlan])?void 0:e.price)||0)+(s.selectedFeatures?s.selectedFeatures.reduce((e,a)=>e+(g[a]||0),0):0);fetch("/api/paytr-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_ip:"127.0.0.1",merchant_oid:"ORDER_".concat(Date.now()),email:s.email,payment_amount:100*a,user_name:"bireysel"===j?f.name:f.authorized,user_address:f.address,user_phone:"",ok_url:window.location.origin+"/ilan-odeme?success=1",fail_url:window.location.origin+"/ilan-odeme?fail=1",test_mode:"1",payment_type:j,company:f.company,taxOffice:f.taxOffice,taxNo:f.taxNo,authorized:f.authorized,tc:f.tc,product_name:s.formData.title,product_price:a.toFixed(2)})}).then(e=>e.json()).then(e=>{w(e.iframe)}).catch(()=>o("PayTR \xf6deme başlatılamadı."))}},[p,S,s,j,f,P,g]),c)?(0,l.jsx)("div",{children:"Y\xfckleniyor..."}):s?(0,l.jsxs)("div",{className:"max-w-xl mx-auto py-12",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Fatura & Test \xd6deme"}),1===p&&(0,l.jsxs)("div",{className:"bg-white rounded shadow p-6 mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Fatura Bilgileri"}),(0,l.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:"bireysel"===j,onChange:()=>v("bireysel")})," Bireysel"]}),(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:"kurumsal"===j,onChange:()=>v("kurumsal")})," Kurumsal"]})]}),"bireysel"===j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Ad Soyad",value:f.name,onChange:e=>N(a=>({...a,name:e.target.value}))})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Adres",value:f.address,onChange:e=>N(a=>({...a,address:e.target.value}))})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"TC Kimlik No",value:f.tc,maxLength:11,inputMode:"numeric",pattern:"[0-9]*",onChange:e=>{let a=e.target.value.replace(/[^0-9]/g,"");N(e=>({...e,tc:a}))}})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Şirket \xdcnvanı",value:f.company,onChange:e=>N(a=>({...a,company:e.target.value}))})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Vergi Dairesi",value:f.taxOffice,onChange:e=>N(a=>({...a,taxOffice:e.target.value}))})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Vergi No",value:f.taxNo,maxLength:10,inputMode:"numeric",pattern:"[0-9]*",onChange:e=>{let a=e.target.value.replace(/[^0-9]/g,"");N(e=>({...e,taxNo:a}))}})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Yetkili Kişi",value:f.authorized,onChange:e=>N(a=>({...a,authorized:e.target.value}))})}),(0,l.jsx)("div",{className:"mb-2",children:(0,l.jsx)("input",{type:"text",className:"w-full border rounded p-2",placeholder:"Adres",value:f.address,onChange:e=>N(a=>({...a,address:e.target.value}))})})]}),u&&(0,l.jsx)("div",{className:"text-red-600 mb-2",children:u}),(0,l.jsx)("button",{onClick:()=>{if("bireysel"===j){if(!f.name||!f.address||!f.tc)return void o("L\xfctfen t\xfcm bireysel fatura alanlarını doldurun.");if(11!==f.tc.length||!/^[0-9]{11}$/.test(f.tc))return void o("TC Kimlik No tam olarak 11 haneli ve sadece rakamlardan oluşmalıdır.")}if("kurumsal"===j){if(!f.company||!f.taxOffice||!f.taxNo||!f.address||!f.authorized)return void o("L\xfctfen t\xfcm kurumsal fatura alanlarını doldurun.");if(10!==f.taxNo.length||!/^[0-9]{10}$/.test(f.taxNo))return void o("Vergi No tam olarak 10 haneli ve sadece rakamlardan oluşmalıdır.")}o(""),b(2)},className:"px-6 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 font-semibold mt-4",children:"Devam"})]}),2===p&&(0,l.jsxs)("div",{className:"max-w-lg mx-auto bg-white rounded shadow p-6 mt-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xd6deme \xd6zeti"}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Başlık:"})," ",s.formData.title]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"A\xe7ıklama:"})," ",s.formData.description]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Fiyat:"})," ",s.formData.price," ₺"]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Premium Plan:"})," ",s.selectedPremiumPlan]}),s.selectedPremiumPlan&&"free"!==s.selectedPremiumPlan&&P[s.selectedPremiumPlan]&&(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Premium Plan \xdccreti:"})," ",P[s.selectedPremiumPlan].price," ₺"]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Ekstra \xd6zellikler:"})," ",(null==(e=s.selectedFeatures)?void 0:e.map(e=>d[e]||e).join(", "))||"-"]}),s.selectedFeatures&&s.selectedFeatures.length>0&&(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Premium \xd6zellik Fiyatları:"}),(0,l.jsx)("ul",{className:"ml-4 mt-1",children:s.selectedFeatures.map(e=>(0,l.jsxs)("li",{children:[d[e]||e," : ",g[e]||0," ₺"]},e))}),(0,l.jsxs)("div",{className:"mt-2 font-bold",children:["Toplam Premium \xd6zellik \xdccreti: ",s.selectedFeatures.reduce((e,a)=>e+(g[a]||0),0)," ₺"]})]}),(0,l.jsxs)("div",{className:"mt-4 text-lg font-bold",children:["Toplam \xd6denecek Tutar: ",(s.selectedPremiumPlan&&"free"!==s.selectedPremiumPlan&&(null==(a=P[s.selectedPremiumPlan])?void 0:a.price)||0)+(s.selectedFeatures?s.selectedFeatures.reduce((e,a)=>e+(g[a]||0),0):0)," ₺"]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Fatura Tipi:"})," ","bireysel"===j?"Bireysel":"Kurumsal"]}),"bireysel"===j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Ad Soyad:"})," ",f.name]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Adres:"})," ",f.address]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"TC Kimlik No:"})," ",f.tc]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Şirket \xdcnvanı:"})," ",f.company]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Vergi Dairesi:"})," ",f.taxOffice]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Vergi No:"})," ",f.taxNo]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Yetkili Kişi:"})," ",f.authorized]}),(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("b",{children:"Adres:"})," ",f.address]})]}),u&&(0,l.jsx)("div",{className:"text-red-600 mb-2",children:u}),S?(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:S}}):(0,l.jsx)("div",{children:"\xd6deme ekranı y\xfckleniyor..."}),u&&(0,l.jsx)("div",{className:"text-red-600 text-sm mt-2",children:u})]})]}):(0,l.jsx)("div",{children:"İlan verisi bulunamadı."})}},35695:(e,a,s)=>{"use strict";var l=s(18999);s.o(l,"useParams")&&s.d(a,{useParams:function(){return l.useParams}}),s.o(l,"usePathname")&&s.d(a,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(a,{useRouter:function(){return l.useRouter}}),s.o(l,"useSearchParams")&&s.d(a,{useSearchParams:function(){return l.useSearchParams}})},75596:(e,a,s)=>{Promise.resolve().then(s.bind(s,4638))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=75596)),_N_E=e.O()}]);