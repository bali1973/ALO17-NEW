(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4917],{1243:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(19946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},12486:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(19946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},12926:(e,r,s)=>{"use strict";s.d(r,{As:()=>d,default:()=>m});var l=s(95155),a=s(12115),i=s(50626);let n=(0,a.createContext)(void 0);function c(e){let{children:r}=e,[s,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let r=await e.json();r.user&&i({user:r.user})}}catch(e){console.error("Auth check failed:",e)}finally{d(!1)}})()},[]),(0,l.jsx)(n.Provider,{value:{session:s,isLoading:c,setSession:i},children:r})}function d(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let o=(0,a.createContext)(void 0);function u(e){let{children:r}=e,[s,n]=(0,a.useState)("tr"),[c,d]=(0,a.useState)(0);return(0,a.useEffect)(()=>(i.Ru.loadLocaleFromStorage(),n(i.Ru.getCurrentLocale()),i.Ru.onLocaleChange(e=>{n(e),d(e=>e+1),window.location.reload()})),[]),(0,l.jsx)(o.Provider,{value:{currentLocale:s,setLocale:e=>{i.Ru.setLocale(e)},forceRefresh:()=>{d(e=>e+1),window.location.reload()}},children:(0,l.jsx)("div",{children:r},c)})}function m(e){let{children:r}=e;return(0,l.jsx)(c,{children:(0,l.jsx)(u,{children:r})})}},19946:(e,r,s)=>{"use strict";s.d(r,{A:()=>d});var l=s(12115);let a=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},i=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return r.filter((e,r,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)((e,r)=>{let{color:s="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:o="",children:u,iconNode:m,...h}=e;return(0,l.createElement)("svg",{ref:r,...n,width:a,height:a,stroke:s,strokeWidth:d?24*Number(c)/Number(a):c,className:i("lucide",o),...!u&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[r,s]=e;return(0,l.createElement)(r,s)}),...Array.isArray(u)?u:[u]])}),d=(e,r)=>{let s=(0,l.forwardRef)((s,n)=>{let{className:d,...o}=s;return(0,l.createElement)(c,{ref:n,iconNode:r,className:i("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return s.displayName=a(e),s}},35695:(e,r,s)=>{"use strict";var l=s(18999);s.o(l,"useParams")&&s.d(r,{useParams:function(){return l.useParams}}),s.o(l,"usePathname")&&s.d(r,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(r,{useRouter:function(){return l.useRouter}}),s.o(l,"useSearchParams")&&s.d(r,{useSearchParams:function(){return l.useSearchParams}})},40646:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},54416:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},57434:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(19946).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},62276:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var l=s(95155),a=s(12115),i=s(35695),n=s(12926);let c=(0,s(19946).A)("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var d=s(71007),o=s(57434),u=s(1243),m=s(40646),h=s(54416),p=s(12486);function x(){let{session:e,isLoading:r}=(0,n.As)(),s=(0,i.useRouter)(),x=(0,i.useSearchParams)(),[b,g]=(0,a.useState)({type:t("listing_complaint"),subject:"",description:"",listingId:"",listingTitle:"",userEmail:"",priority:"medium"}),[y,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)("idle"),[N,w]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=x.get("listingId"),r=x.get("listingTitle"),s=x.get("userEmail");e&&g(s=>({...s,listingId:e,listingTitle:r||"",type:t("listing_complaint")})),s&&g(e=>({...e,userEmail:s,type:t("user_complaint")}))},[x,t]),(0,a.useEffect)(()=>{!r&&(e||s.push("/giris?redirect=/rapor-gonder"))},[e,r,s]);let k=async r=>{if(r.preventDefault(),!e)return void w(t("login_required_to_report"));if(!b.subject.trim()||!b.description.trim())return void w(t("subject_and_description_required"));f(!0),w("");try{let r={type:b.type,subject:b.subject,description:b.description,date:new Date().toISOString().slice(0,10),status:t("open"),user:e.user.email,priority:b.priority,listingId:b.listingId||void 0,listingTitle:b.listingTitle||void 0,reportedUserEmail:b.userEmail||void 0};(await fetch("/api/raporlar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(v("success"),g({type:t("listing_complaint"),subject:"",description:"",listingId:"",listingTitle:"",userEmail:"",priority:"medium"}),setTimeout(()=>{v("idle"),s.push("/bildirimler")},3e3)):(v("error"),w(t("report_send_error")))}catch(e){v("error"),w(t("report_send_error"))}finally{f(!1)}},_=(e,r)=>{g(s=>({...s,[e]:r})),"error"===j&&(v("idle"),w(""))},A=[{value:t("listing_complaint"),label:t("listing_complaint"),icon:c,description:t("listing_complaint_description")},{value:t("user_complaint"),label:t("user_complaint"),icon:d.A,description:t("user_complaint_description")},{value:t("general_complaint"),label:t("general_complaint"),icon:o.A,description:t("general_complaint_description")}],C=[{value:"low",label:t("low"),color:"text-green-600"},{value:"medium",label:t("medium"),color:"text-yellow-600"},{value:"high",label:t("high"),color:"text-red-600"}];return r?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:'""'})]})}):e?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,l.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:(0,l.jsx)(u.A,{className:"w-8 h-8 text-red-600"})}),(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:'""'}),(0,l.jsx)("p",{className:"text-gray-600",children:'""'})]}),"success"===j&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(m.A,{className:"w-5 h-5 text-green-600 mr-2"}),(0,l.jsx)("span",{className:"text-green-800 font-medium",children:'""'})]})}),"error"===j&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(h.A,{className:"w-5 h-5 text-red-600 mr-2"}),(0,l.jsx)("span",{className:"text-red-800",children:N})]})}),(0,l.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:'""'}),(0,l.jsx)("div",{className:"grid gap-3",children:A.map(e=>{let r=e.icon;return(0,l.jsxs)("label",{className:"relative flex items-start p-4 border rounded-lg cursor-pointer transition-colors ".concat(b.type===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,l.jsx)("input",{type:"radio",name:"type",value:e.value,checked:b.type===e.value,onChange:e=>_("type",e.target.value),className:"sr-only"}),(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-5 h-5 border-2 rounded-full mt-0.5 ".concat(b.type===e.value?"border-blue-500 bg-blue-500":"border-gray-300"),children:b.type===e.value&&(0,l.jsx)("div",{className:"w-full h-full rounded-full bg-white scale-50"})}),(0,l.jsxs)("div",{className:"ml-3",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(r,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]})]},e.value)})})]}),b.type===t("listing_complaint")&&b.listingTitle&&(0,l.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,l.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:'""'}),(0,l.jsx)("p",{className:"text-sm text-blue-800",children:b.listingTitle})]}),b.type===t("user_complaint")&&b.userEmail&&(0,l.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,l.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:'""'}),(0,l.jsx)("p",{className:"text-sm text-blue-800",children:b.userEmail})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:'""'}),(0,l.jsx)("div",{className:"flex gap-4",children:C.map(e=>(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",name:"priority",value:e.value,checked:b.priority===e.value,onChange:e=>_("priority",e.target.value),className:"mr-2"}),(0,l.jsx)("span",{className:"text-sm ".concat(e.color),children:e.label})]},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:'"" *'}),(0,l.jsx)("input",{type:"text",id:"subject",value:b.subject,onChange:e=>_("subject",e.target.value),placeholder:"",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:'"" *'}),(0,l.jsx)("textarea",{id:"description",value:b.description,onChange:e=>_("description",e.target.value),placeholder:"",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",required:!0})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{type:"submit",disabled:y,className:"flex-1 bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),'""...']}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.A,{className:"w-5 h-5"}),'""']})}),(0,l.jsx)("button",{type:"button",onClick:()=>s.back(),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:'""'})]})]}),(0,l.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:'""'}),(0,l.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,l.jsx)("li",{children:'• ""'}),(0,l.jsx)("li",{children:'• ""'}),(0,l.jsx)("li",{children:'• ""'}),(0,l.jsx)("li",{children:'• ""'})]})]})]})})}):null}},71007:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});let l=(0,s(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},85853:(e,r,s)=>{Promise.resolve().then(s.bind(s,62276))}},e=>{e.O(0,[626,8441,5964,7358],()=>e(e.s=85853)),_N_E=e.O()}]);