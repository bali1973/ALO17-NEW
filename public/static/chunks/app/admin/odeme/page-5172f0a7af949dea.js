(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1213],{77307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(95155),a=r(12115);function n(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[i,d]=(0,a.useState)(null),[c,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{n(!0),d(null);try{let e=await fetch("/payments.json");if(!e.ok)throw Error("Kayıtlar y\xfcklenemedi");let r=await e.json();t(r.reverse())}catch(e){d(e.message||"Hata oluştu")}finally{n(!1)}})()},[]),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto py-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\xd6deme & Fatura Kayıtları"}),i&&(0,s.jsx)("div",{className:"text-red-600 mb-4",children:i}),r?(0,s.jsx)("div",{children:"Y\xfckleniyor..."}):0===e.length?(0,s.jsx)("div",{children:"Kayıt bulunamadı."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full border text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 border",children:"Tarih"}),(0,s.jsx)("th",{className:"p-2 border",children:"Kullanıcı"}),(0,s.jsx)("th",{className:"p-2 border",children:"E-posta"}),(0,s.jsx)("th",{className:"p-2 border",children:"\xd6deme Tipi"}),(0,s.jsx)("th",{className:"p-2 border",children:"Fatura Tipi"}),(0,s.jsx)("th",{className:"p-2 border",children:"Tutar"}),(0,s.jsx)("th",{className:"p-2 border",children:"Durum"}),(0,s.jsx)("th",{className:"p-2 border",children:"Detay"})]})}),(0,s.jsx)("tbody",{children:e.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"p-2 border",children:new Date(e.date).toLocaleString("tr-TR")}),(0,s.jsx)("td",{className:"p-2 border",children:e.user_name}),(0,s.jsx)("td",{className:"p-2 border",children:e.email}),(0,s.jsx)("td",{className:"p-2 border",children:e.payment_type}),(0,s.jsx)("td",{className:"p-2 border",children:e.fatura_type}),(0,s.jsxs)("td",{className:"p-2 border",children:[(e.payment_amount/100).toFixed(2)," TL"]}),(0,s.jsx)("td",{className:"p-2 border",children:e.status}),(0,s.jsx)("td",{className:"p-2 border",children:(0,s.jsx)("button",{onClick:()=>l(e),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Detay"})})]},t))})]})}),c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-lg relative",children:[(0,s.jsx)("button",{onClick:()=>l(null),className:"absolute top-2 right-2 text-gray-500 hover:text-red-600",children:"Kapat"}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Fatura Detayı"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Kullanıcı:"})," ",c.user_name]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"E-posta:"})," ",c.email]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Telefon:"})," ",c.user_phone]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Adres:"})," ",c.user_address]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"\xd6deme Tipi:"})," ",c.payment_type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Fatura Tipi:"})," ",c.fatura_type]}),"kurumsal"===c.fatura_type?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Şirket \xdcnvanı:"})," ",c.buyer_company]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Vergi Dairesi:"})," ",c.buyer_tax_office]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Vergi No:"})," ",c.buyer_tax_no]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Yetkili:"})," ",c.buyer_authorized]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"TC Kimlik No:"})," ",c.buyer_tc]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"\xdcr\xfcn:"})," ",c.product_name]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"\xdcr\xfcn Fiyatı:"})," ",c.product_price," TL"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"\xd6denen Tutar:"})," ",(c.payment_amount/100).toFixed(2)," TL"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Tarih:"})," ",new Date(c.date).toLocaleString("tr-TR")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Durum:"})," ",c.status]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"İşlem No:"})," ",c.merchant_oid]})]}),(0,s.jsx)("div",{className:"mt-6 flex justify-end gap-2",children:(0,s.jsx)("button",{onClick:async()=>{{window.jspdf||await new Promise((e,t)=>{let r=document.createElement("script");r.src="/vendor/jspdf.umd.min.js",r.onload=e,r.onerror=t,document.body.appendChild(r)});let e=new window.jspdf.jsPDF,t=10;e.setFontSize(16),e.text("FATURA",105,t,{align:"center"}),t+=10,e.setFontSize(10),e.text("Tarih: ".concat(new Date(c.date).toLocaleString("tr-TR")),10,t),t+=8,e.text("Fatura Tipi: ".concat(c.fatura_type),10,t),t+=8,"kurumsal"===c.fatura_type?(e.text("Şirket \xdcnvanı: ".concat(c.buyer_company),10,t),t+=8,e.text("Vergi Dairesi: ".concat(c.buyer_tax_office),10,t),t+=8,e.text("Vergi No: ".concat(c.buyer_tax_no),10,t),t+=8,e.text("Yetkili: ".concat(c.buyer_authorized),10,t)):e.text("TC Kimlik No: ".concat(c.buyer_tc),10,t),t+=8,e.text("Ad Soyad: ".concat(c.user_name),10,t),t+=8,e.text("E-posta: ".concat(c.email),10,t),t+=8,e.text("Telefon: ".concat(c.user_phone),10,t),t+=8,e.text("Adres: ".concat(c.user_address),10,t),t+=12,e.setFontSize(12),e.text("\xdcr\xfcn Bilgileri",10,t),t+=8,e.setFontSize(10),e.text("\xdcr\xfcn: ".concat(c.product_name),10,t),t+=8,e.text("\xdcr\xfcn Fiyatı: ".concat(c.product_price," TL"),10,t),t+=8,e.text("\xd6denen Tutar: ".concat((c.payment_amount/100).toFixed(2)," TL"),10,t),t+=8,e.text("İşlem No: ".concat(c.merchant_oid),10,t),t+=8,e.text("Durum: ".concat(c.status),10,t),t+=8,e.save("fatura_".concat(c.merchant_oid,".pdf"))}},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Fatura PDF İndir"})})]})})]})}},87104:(e,t,r)=>{Promise.resolve().then(r.bind(r,77307))}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(87104)),_N_E=e.O()}]);